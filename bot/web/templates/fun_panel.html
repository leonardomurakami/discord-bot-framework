{% extends "plugin_base.html" %}

{% block plugin_content %}
<div class="game-grid">
    <div class="game-card">
        <div class="game-title">
            <i class="fa-solid fa-dice icon icon-md" aria-hidden="true"></i>
            <span>Dice Roller</span>
        </div>
        <p>Roll dice using standard notation (e.g., 2d6, 3d20)</p>
        <form hx-post="/plugin/fun/api/roll" hx-target="#roll-result" hx-indicator="#roll-loading">
            <div class="input-group">
                <label for="dice">Dice Notation:</label>
                <input type="text" id="dice" name="dice" value="1d6" placeholder="e.g., 2d6, 3d20">
            </div>
            <button type="submit" class="btn">
                <i class="fa-solid fa-dice icon icon-sm" aria-hidden="true"></i>
                <span>Roll Dice</span>
            </button>
            <span id="roll-loading" class="htmx-indicator">Rolling...</span>
        </form>
        <div id="roll-result" class="result"></div>
    </div>

    <div class="game-card">
        <div class="game-title">
            <i class="fa-solid fa-coins icon icon-md" aria-hidden="true"></i>
            <span>Coin Flip</span>
        </div>
        <p>Flip a virtual coin and see if it lands on heads or tails</p>
        <button class="btn" hx-post="/plugin/fun/api/coinflip" hx-target="#coinflip-result" hx-indicator="#coinflip-loading">
            <i class="fa-solid fa-coins icon icon-sm" aria-hidden="true"></i>
            <span>Flip Coin</span>
        </button>
        <span id="coinflip-loading" class="htmx-indicator">Flipping...</span>
        <div id="coinflip-result" class="result"></div>
    </div>

    <div class="game-card">
        <div class="game-title">
            <i class="fa-solid fa-circle-question icon icon-md" aria-hidden="true"></i>
            <span>Magic 8-Ball</span>
        </div>
        <p>Ask the magic 8-ball a question and get a mystical answer</p>
        <form hx-post="/plugin/fun/api/8ball" hx-target="#eightball-result" hx-indicator="#eightball-loading">
            <div class="input-group">
                <label for="question">Your Question:</label>
                <input type="text" id="question" name="question" placeholder="Ask anything...">
            </div>
            <button type="submit" class="btn">
                <i class="fa-solid fa-circle-question icon icon-sm" aria-hidden="true"></i>
                <span>Ask 8-Ball</span>
            </button>
            <span id="eightball-loading" class="htmx-indicator">Consulting the spirits...</span>
        </form>
        <div id="eightball-result" class="result"></div>
    </div>

    <div class="game-card">
        <div class="game-title">
            <i class="fa-solid fa-shuffle icon icon-md" aria-hidden="true"></i>
            <span>Random Number</span>
        </div>
        <p>Generate a random number within your specified range</p>
        <form hx-post="/plugin/fun/api/random" hx-target="#random-result" hx-indicator="#random-loading">
            <div class="input-group">
                <label for="min">Minimum:</label>
                <input type="number" id="min" name="min" value="1">
            </div>
            <div class="input-group">
                <label for="max">Maximum:</label>
                <input type="number" id="max" name="max" value="100">
            </div>
            <button type="submit" class="btn">
                <i class="fa-solid fa-shuffle icon icon-sm" aria-hidden="true"></i>
                <span>Generate Number</span>
            </button>
            <span id="random-loading" class="htmx-indicator">Generating...</span>
        </form>
        <div id="random-result" class="result"></div>
    </div>

    <div class="game-card">
        <div class="game-title">
            <i class="fa-solid fa-face-laugh icon icon-md" aria-hidden="true"></i>
            <span>Random Joke</span>
        </div>
        <p>Get a random joke to brighten your day</p>
        <button class="btn" hx-post="/plugin/fun/api/joke" hx-target="#joke-result" hx-indicator="#joke-loading">
            <i class="fa-solid fa-face-laugh icon icon-sm" aria-hidden="true"></i>
            <span>Tell me a joke!</span>
        </button>
        <span id="joke-loading" class="htmx-indicator">Finding a good one...</span>
        <div id="joke-result" class="result"></div>
    </div>

    <div class="game-card">
        <div class="game-title">
            <i class="fa-solid fa-comment-dots icon icon-md" aria-hidden="true"></i>
            <span>Inspirational Quote</span>
        </div>
        <p>Get motivated with an inspirational quote</p>
        <button class="btn btn-success" hx-post="/plugin/fun/api/quote" hx-target="#quote-result" hx-indicator="#quote-loading">
            <i class="fa-solid fa-wand-magic-sparkles icon icon-sm" aria-hidden="true"></i>
            <span>Inspire me!</span>
        </button>
        <span id="quote-loading" class="htmx-indicator">Finding wisdom...</span>
        <div id="quote-result" class="result"></div>
    </div>
</div>
{% endblock %}

{% block plugin_scripts %}
<script>
// Fun plugin specific JavaScript can go here
console.log('Fun & Games panel loaded!');

// Example: Auto-clear previous results when starting new actions
document.body.addEventListener('htmx:beforeRequest', function(event) {
    // Find the target result div and hide it
    const target = document.querySelector(event.detail.target);
    if (target && target.classList.contains('result')) {
        target.style.display = 'none';
        target.innerHTML = '';
    }
});
</script>
{% endblock %}